

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>seagliderOG1 demo &mdash; seagliderOG1 v0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=20758594" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2fea6348"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="seagliderOG1 API" href="seagliderOG1.html" />
    <link rel="prev" title="What’s in seagliderOG1 project?" href="project_structure.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            seagliderOG1
              <img src="_static/logo_seaglider.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Getting Started: Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_structure.html">What’s in <code class="docutils literal notranslate"><span class="pre">seagliderOG1</span></code> project?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">seagliderOG1 demo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Reading-basestation-files">Reading basestation files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Load-single-sample-dataset">Load single sample dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Load-datasets-from-a-local-directory">Load datasets from a local directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Load-datasets-from-a-remote-directory-(URL)">Load datasets from a remote directory (URL)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Convert-to-OG1-format">Convert to OG1 format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Convert-a-single-(sample)-dataset">Convert a single (sample) dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Convert-mission-from-a-local-directory-of-basestation-files">Convert mission from a local directory of basestation files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Convert-mission-from-the-NCEI-server-(with-p*nc-files)">Convert mission from the NCEI server (with p*nc files)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Saving-data">Saving data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Run-multiple-missions">Run multiple missions</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help and reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://github.com/ocean-uhh/seagliderOG1">GitHub Repo</a></li>
<li class="toctree-l1"><a class="reference internal" href="seagliderOG1.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">seagliderOG1</span> <span class="pre">API</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">seagliderOG1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">seagliderOG1 demo</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/demo-output.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="seagliderOG1-demo">
<h1>seagliderOG1 demo<a class="headerlink" href="#seagliderOG1-demo" title="Link to this heading"></a></h1>
<p>The purpose of this notebook is to demonstrate the functionality of <code class="docutils literal notranslate"><span class="pre">seagliderOG1</span></code> to convert from Seaglider basestation files to OG1 format.</p>
<ul class="simple">
<li><p>OG1 format is a newly agreed format (since June 2024) for glider data sets from various platforms (e.g., Seaglider, Slocum, Seaexplorer). It lives on github here: (<a class="reference external" href="https://github.com/OceanGlidersCommunity/OG-format-user-manual">https://github.com/OceanGlidersCommunity/OG-format-user-manual</a>).</p></li>
<li><p>OG1 manual: <a class="reference external" href="https://oceangliderscommunity.github.io/OG-format-user-manual/OG_Format.html">https://oceangliderscommunity.github.io/OG-format-user-manual/OG_Format.html</a></p></li>
</ul>
<p>The test case is to convert sg015 data from the Labrador Sea in September 2004.</p>
<p>The demo is organised to show</p>
<ul class="simple">
<li><p>Conversion of a single dive cycle (single <code class="docutils literal notranslate"><span class="pre">p*.nc</span></code> file)</p></li>
<li><p>Conversion for a folder of local dive-cycle files (full mission of <code class="docutils literal notranslate"><span class="pre">p*.nc</span></code> files)</p></li>
<li><p>Download from remote server + conversion (directory with full mission of <code class="docutils literal notranslate"><span class="pre">p*.nc</span></code> files)</p></li>
</ul>
<p>Options are provided to only load e.g. 10 files, but note that OG1 format expects a full mission.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="n">script_dir</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
<span class="n">parent_dir</span> <span class="o">=</span> <span class="n">script_dir</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">))</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/seagliderOG1&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="c1">### silence future warnings</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">FutureWarning</span><span class="p">)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pooch</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">seagliderOG1</span><span class="w"> </span><span class="kn">import</span> <span class="n">readers</span><span class="p">,</span> <span class="n">writers</span><span class="p">,</span> <span class="n">plotters</span><span class="p">,</span> <span class="n">tools</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">seagliderOG1</span><span class="w"> </span><span class="kn">import</span> <span class="n">convertOG1</span><span class="p">,</span> <span class="n">vocabularies</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/home/runner/work/seagliderOG1/seagliderOG1
[&#39;/home/runner/micromamba/envs/TEST/lib/python313.zip&#39;, &#39;/home/runner/micromamba/envs/TEST/lib/python3.13&#39;, &#39;/home/runner/micromamba/envs/TEST/lib/python3.13/lib-dynload&#39;, &#39;&#39;, &#39;/home/runner/micromamba/envs/TEST/lib/python3.13/site-packages&#39;, &#39;/home/runner/work/seagliderOG1/seagliderOG1&#39;, &#39;/home/runner/work/seagliderOG1/seagliderOG1/seagliderOG1&#39;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[1]</span><span class="ansi-green-fg">, line 17</span>
<span class="ansi-green-fg">     15</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-intense-fg ansi-bold">os</span>
<span class="ansi-green-fg">     16</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-intense-fg ansi-bold">pooch</span>
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">17</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-intense-fg ansi-bold">seagliderOG1</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-bold" style="color: rgb(0,135,0)">import</span> readers, writers, plotters, tools
<span class="ansi-green-fg">     18</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-intense-fg ansi-bold">seagliderOG1</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-bold" style="color: rgb(0,135,0)">import</span> convertOG1, vocabularies

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/work/seagliderOG1/seagliderOG1/seagliderOG1/plotters.py:18</span>
<span class="ansi-green-fg">     12</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-intense-fg ansi-bold">matplotlib</span><span class="ansi-blue-intense-fg ansi-bold">.</span><span class="ansi-blue-intense-fg ansi-bold">pyplot</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-bold" style="color: rgb(0,135,0)">as</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-intense-fg ansi-bold">plt</span>
<span class="ansi-green-fg">     15</span> <span style="color: rgb(95,135,135)">##------------------------------------------------------------------------------------</span>
<span class="ansi-green-fg">     16</span> <span style="color: rgb(95,135,135)">## Views of the ds or nc file</span>
<span class="ansi-green-fg">     17</span> <span style="color: rgb(95,135,135)">##------------------------------------------------------------------------------------</span>
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">18</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-fg">show_contents</span>(data: <span style="color: rgb(0,135,0)">str</span> | xr.Dataset, content_type: <span style="color: rgb(0,135,0)">str</span> = <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">variables</span><span class="ansi-yellow-fg">&#34;</span>) -&gt; <span class="ansi-yellow-bg">pd</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">io</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">formats</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">style</span>.Styler | pd.DataFrame:
<span class="ansi-green-fg">     19</span> <span style="color: rgb(188,188,188)">    </span><span class="ansi-yellow-fg">&#34;&#34;&#34;Show contents of an xarray Dataset or a netCDF file.</span>
<span class="ansi-green-fg">     20</span> <span class="ansi-yellow-fg">    </span>
<span class="ansi-green-fg">     21</span> <span class="ansi-yellow-fg">    Wrapper function to display either variables or attributes from the dataset.</span>
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">     41</span> <span class="ansi-yellow-fg">        If content_type is not &#39;variables&#39;, &#39;vars&#39;, &#39;attributes&#39;, or &#39;attrs&#39;.</span>
<span class="ansi-green-fg">     42</span> <span class="ansi-yellow-fg">    &#34;&#34;&#34;</span>
<span class="ansi-green-fg">     43</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> content_type <span class="ansi-bold" style="color: rgb(175,0,255)">in</span> [<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">variables</span><span class="ansi-yellow-fg">&#34;</span>, <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">vars</span><span class="ansi-yellow-fg">&#34;</span>]:

<span class="ansi-red-fg">AttributeError</span>: module &#39;pandas.io.formats&#39; has no attribute &#39;style&#39;
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify the path for writing datafiles</span>
<span class="n">data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parent_dir</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<section id="Reading-basestation-files">
<h2>Reading basestation files<a class="headerlink" href="#Reading-basestation-files" title="Link to this heading"></a></h2>
<p>This has three ways to load a glider dataset.</p>
<p>Load an example dataset using <code class="docutils literal notranslate"><span class="pre">seagliderOG1.fetchers.load_sample_dataset</span></code></p>
<p>Alternatively, use your own with e.g. <code class="docutils literal notranslate"><span class="pre">ds</span> <span class="pre">=</span> <span class="pre">xr.open_dataset('/path/to/yourfile.nc')</span></code></p>
<section id="Load-single-sample-dataset">
<h3>Load single sample dataset<a class="headerlink" href="#Load-single-sample-dataset" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">load_sample_dataset</span><span class="p">()</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[3]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> ds = <span class="ansi-yellow-bg">readers</span>.load_sample_dataset()
<span class="ansi-green-fg">      2</span> ds

<span class="ansi-red-fg">NameError</span>: name &#39;readers&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Load-datasets-from-a-local-directory">
<h3>Load datasets from a local directory<a class="headerlink" href="#Load-datasets-from-a-local-directory" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify the input directory on your local machine</span>
<span class="n">input_dir</span> <span class="o">=</span> <span class="n">data_path</span> <span class="o">+</span> <span class="s1">&#39;/demo_sg005&#39;</span> <span class="c1">### chose the input directory with your data</span>

<span class="c1"># Load and concatenate all datasets in the input directory</span>
<span class="c1"># Optionally, specify the range of profiles to load (start_profile, end_profile)</span>
<span class="n">list_datasets</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">load_basestation_files</span><span class="p">(</span><span class="n">input_dir</span><span class="p">,</span> <span class="n">start_profile</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end_profile</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># Where list_datasets is a list of xarray datasets.  A single dataset can be accessed as</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">list_datasets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[4]</span><span class="ansi-green-fg">, line 6</span>
<span class="ansi-green-fg">      2</span> input_dir = data_path + <span class="ansi-yellow-fg">&#39;</span><span class="ansi-yellow-fg">/demo_sg005</span><span class="ansi-yellow-fg">&#39;</span> <span style="color: rgb(95,135,135)">### chose the input directory with your data</span>
<span class="ansi-green-fg">      4</span> <span style="color: rgb(95,135,135)"># Load and concatenate all datasets in the input directory</span>
<span class="ansi-green-fg">      5</span> <span style="color: rgb(95,135,135)"># Optionally, specify the range of profiles to load (start_profile, end_profile)</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">6</span> list_datasets = <span class="ansi-yellow-bg">readers</span>.load_basestation_files(input_dir, start_profile=<span class="ansi-green-fg">0</span>, end_profile=<span class="ansi-green-fg">5</span>)
<span class="ansi-green-fg">      8</span> <span style="color: rgb(95,135,135)"># Where list_datasets is a list of xarray datasets.  A single dataset can be accessed as</span>
<span class="ansi-green-fg">      9</span> ds = list_datasets[<span class="ansi-green-fg">0</span>]

<span class="ansi-red-fg">NameError</span>: name &#39;readers&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">load_sample_dataset</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[5]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> ds = <span class="ansi-yellow-bg">readers</span>.load_sample_dataset()

<span class="ansi-red-fg">NameError</span>: name &#39;readers&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Load-datasets-from-a-remote-directory-(URL)">
<h3>Load datasets from a remote directory (URL)<a class="headerlink" href="#Load-datasets-from-a-remote-directory-(URL)" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify the server where data are located</span>
<span class="n">server</span> <span class="o">=</span> <span class="s2">&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/033/20100903/&quot;</span>

<span class="c1"># Load and concatenate all datasets from the server, optionally specifying the range of profiles to load</span>
<span class="n">list_datasets</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">load_basestation_files</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">start_profile</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">end_profile</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[6]</span><span class="ansi-green-fg">, line 5</span>
<span class="ansi-green-fg">      2</span> server = <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/033/20100903/</span><span class="ansi-yellow-fg">&#34;</span>
<span class="ansi-green-fg">      4</span> <span style="color: rgb(95,135,135)"># Load and concatenate all datasets from the server, optionally specifying the range of profiles to load</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">5</span> list_datasets = <span class="ansi-yellow-bg">readers</span>.load_basestation_files(server, start_profile=<span class="ansi-green-fg">1</span>, end_profile=<span class="ansi-green-fg">10</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;readers&#39; is not defined
</pre></div></div>
</div>
</section>
</section>
<section id="Convert-to-OG1-format">
<h2>Convert to OG1 format<a class="headerlink" href="#Convert-to-OG1-format" title="Link to this heading"></a></h2>
<p>Process:</p>
<ol class="arabic simple">
<li><p>For one basestation dataset, split the dataset by dimension (<code class="docutils literal notranslate"><span class="pre">split_ds</span></code>)</p></li>
<li><p>Transform into OG1 format: dataset with dims <code class="docutils literal notranslate"><span class="pre">sg_data_point</span></code></p>
<ul class="simple">
<li><p>Change the dimension to <code class="docutils literal notranslate"><span class="pre">N_MEASUREMENTS</span></code></p></li>
<li><p>Rename variables according to <code class="docutils literal notranslate"><span class="pre">vocabularies.standard_names</span></code></p></li>
<li><p>Assign variable attributes according to <code class="docutils literal notranslate"><span class="pre">vocabularies.vocab_attrs</span></code>. (Note: This <em>could</em> go wrong since it makes assumptions about the input variables. May need additional handling.)</p></li>
</ul>
</li>
<li><p>Add missing mandatory variables:</p>
<ul class="simple">
<li><p>From <code class="docutils literal notranslate"><span class="pre">split_ds[(gps_info,)]</span></code>, add the <code class="docutils literal notranslate"><span class="pre">LATITUDE_GPS</span></code>, <code class="docutils literal notranslate"><span class="pre">LONGITUDE_GPS</span></code> and <code class="docutils literal notranslate"><span class="pre">TIME_GPS</span></code> (Note: presently <code class="docutils literal notranslate"><span class="pre">TIME_GPS</span></code> is stripped before saving, but <code class="docutils literal notranslate"><span class="pre">TIME</span></code> values contain <code class="docutils literal notranslate"><span class="pre">TIME_GPS</span></code>)</p></li>
<li><p>Create <code class="docutils literal notranslate"><span class="pre">PROFILE_NUMBER</span></code> and <code class="docutils literal notranslate"><span class="pre">PHASE</span></code></p></li>
<li><p>Calculate <code class="docutils literal notranslate"><span class="pre">DEPTH_Z</span></code> which is positive up</p></li>
</ul>
</li>
<li><p>Update attributes for the file.</p>
<ul class="simple">
<li><p>Combines <code class="docutils literal notranslate"><span class="pre">creator</span></code> and <code class="docutils literal notranslate"><span class="pre">contributor</span></code> from original attributes into <code class="docutils literal notranslate"><span class="pre">contributor</span></code></p></li>
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">contributing_institutions</span></code> based on <code class="docutils literal notranslate"><span class="pre">institution</span></code></p></li>
<li><p>Reformats time in <code class="docutils literal notranslate"><span class="pre">time_coverage_*</span></code> and <code class="docutils literal notranslate"><span class="pre">start_time</span></code>–&gt; <code class="docutils literal notranslate"><span class="pre">start_date</span></code></p></li>
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">date_modified</span></code></p></li>
<li><p>Renames <code class="docutils literal notranslate"><span class="pre">comments</span></code>–&gt;<code class="docutils literal notranslate"><span class="pre">history</span></code>, <code class="docutils literal notranslate"><span class="pre">site</span></code>–&gt;<code class="docutils literal notranslate"><span class="pre">summary</span></code></p></li>
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">title</span></code>, <code class="docutils literal notranslate"><span class="pre">platform</span></code>, <code class="docutils literal notranslate"><span class="pre">platform_vocabulary</span></code>, <code class="docutils literal notranslate"><span class="pre">featureType</span></code>, <code class="docutils literal notranslate"><span class="pre">Conventions</span></code>, <code class="docutils literal notranslate"><span class="pre">rtqc_method*</span></code> according to OceanGliders format</p></li>
<li><p>Retains <code class="docutils literal notranslate"><span class="pre">naming_authority</span></code>, <code class="docutils literal notranslate"><span class="pre">institution</span></code>, <code class="docutils literal notranslate"><span class="pre">project</span></code>, <code class="docutils literal notranslate"><span class="pre">geospatial_*</span></code> as OG attributes</p></li>
<li><p>Retains extra attributes: <code class="docutils literal notranslate"><span class="pre">license</span></code>, <code class="docutils literal notranslate"><span class="pre">keywords</span></code>, <code class="docutils literal notranslate"><span class="pre">keywords_vocabulary</span></code>, <code class="docutils literal notranslate"><span class="pre">file_version</span></code>, <code class="docutils literal notranslate"><span class="pre">acknowledgement</span></code>, <code class="docutils literal notranslate"><span class="pre">date_created</span></code>, <code class="docutils literal notranslate"><span class="pre">disclaimer</span></code></p></li>
</ul>
</li>
</ol>
<p>Future behaviour to be added:</p>
<ol class="arabic simple" start="6">
<li><p>Retain the variables starting with <code class="docutils literal notranslate"><span class="pre">sg_cal</span></code> and check whether they vary over the mission (shouldn’t)</p></li>
<li><p>Add sensors, using information in the <code class="docutils literal notranslate"><span class="pre">split_ds</span></code> with no dimensions</p>
<ul class="simple">
<li><p>Need (from sg_cal_constants: <code class="docutils literal notranslate"><span class="pre">sg_cal</span></code> plus <code class="docutils literal notranslate"><span class="pre">volmax</span></code>, <code class="docutils literal notranslate"><span class="pre">vbd_cnts_per_cc</span></code>, <code class="docutils literal notranslate"><span class="pre">therm_expan</span></code>, <code class="docutils literal notranslate"><span class="pre">t_*</span></code>, <code class="docutils literal notranslate"><span class="pre">mass</span></code>, <code class="docutils literal notranslate"><span class="pre">hd_*</span></code>, <code class="docutils literal notranslate"><span class="pre">ctcor</span></code>, <code class="docutils literal notranslate"><span class="pre">cpcor</span></code>, <code class="docutils literal notranslate"><span class="pre">c_*</span></code>, <code class="docutils literal notranslate"><span class="pre">abs_compress</span></code>, <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">Tcor</span></code>, <code class="docutils literal notranslate"><span class="pre">Soc</span></code>, <code class="docutils literal notranslate"><span class="pre">Pcor</span></code>, <code class="docutils literal notranslate"><span class="pre">Foffset</span></code>)</p></li>
<li><p>Maybe also <code class="docutils literal notranslate"><span class="pre">reviewed</span></code>, <code class="docutils literal notranslate"><span class="pre">magnetic_variation</span></code> (which will change with position), <code class="docutils literal notranslate"><span class="pre">log_D_FLARE</span></code>, <code class="docutils literal notranslate"><span class="pre">flight_avg_speed_north</span></code> and <code class="docutils literal notranslate"><span class="pre">flight_avg_speed_east</span></code> also with <code class="docutils literal notranslate"><span class="pre">_gsm</span></code>, <code class="docutils literal notranslate"><span class="pre">depth_avg_curr_north</span></code> and <code class="docutils literal notranslate"><span class="pre">depth_avg_curr_east</span></code> also with <code class="docutils literal notranslate"><span class="pre">_gsm</span></code>, <code class="docutils literal notranslate"><span class="pre">wlbb2f</span></code> - means sensor <code class="docutils literal notranslate"><span class="pre">sg_cal_mission_title</span></code> <code class="docutils literal notranslate"><span class="pre">sg_cal_id_str</span></code> <code class="docutils literal notranslate"><span class="pre">calibcomm_oxygen</span></code> <code class="docutils literal notranslate"><span class="pre">calibcomm</span></code> <code class="docutils literal notranslate"><span class="pre">sbe41</span></code> means ?? <code class="docutils literal notranslate"><span class="pre">hdm_qc</span></code> <code class="docutils literal notranslate"><span class="pre">glider</span></code></p></li>
</ul>
</li>
</ol>
<section id="Convert-a-single-(sample)-dataset">
<h3>Convert a single (sample) dataset<a class="headerlink" href="#Convert-a-single-(sample)-dataset" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Loads one dataset (p0150500_20050213.nc)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">load_sample_dataset</span><span class="p">()</span>

<span class="n">ds_OG1</span><span class="p">,</span> <span class="n">var_list</span> <span class="o">=</span> <span class="n">convertOG1</span><span class="o">.</span><span class="n">convert_to_OG1</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>

<span class="c1"># Check the results - uncomment the following lines to either generate a plot or show the variables.</span>
<span class="n">plotters</span><span class="o">.</span><span class="n">plot_profile_depth</span><span class="p">(</span><span class="n">ds_OG1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[7]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> <span style="color: rgb(95,135,135)"># Loads one dataset (p0150500_20050213.nc)</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> ds = <span class="ansi-yellow-bg">readers</span>.load_sample_dataset()
<span class="ansi-green-fg">      4</span> ds_OG1, var_list = convertOG1.convert_to_OG1(ds)
<span class="ansi-green-fg">      6</span> <span style="color: rgb(95,135,135)"># Check the results - uncomment the following lines to either generate a plot or show the variables.</span>

<span class="ansi-red-fg">NameError</span>: name &#39;readers&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### print the list of inital variables of the dataset</span>
<span class="n">var_list</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[8]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> <span style="color: rgb(95,135,135)">### print the list of inital variables of the dataset</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> <span class="ansi-yellow-bg">var_list</span>

<span class="ansi-red-fg">NameError</span>: name &#39;var_list&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print to screen a table of attributes</span>
<span class="n">plotters</span><span class="o">.</span><span class="n">show_contents</span><span class="p">(</span><span class="n">ds_OG1</span><span class="p">,</span><span class="s1">&#39;attrs&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[9]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> <span style="color: rgb(95,135,135)"># Print to screen a table of attributes</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> <span class="ansi-yellow-bg">plotters</span>.show_contents(ds_OG1,<span class="ansi-yellow-fg">&#39;</span><span class="ansi-yellow-fg">attrs</span><span class="ansi-yellow-fg">&#39;</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;plotters&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print to screen a table of the variables and variable attributes</span>
<span class="n">plotters</span><span class="o">.</span><span class="n">show_contents</span><span class="p">(</span><span class="n">ds_OG1</span><span class="p">,</span><span class="s1">&#39;variables&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[10]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> <span style="color: rgb(95,135,135)"># Print to screen a table of the variables and variable attributes</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> <span class="ansi-yellow-bg">plotters</span>.show_contents(ds_OG1,<span class="ansi-yellow-fg">&#39;</span><span class="ansi-yellow-fg">variables</span><span class="ansi-yellow-fg">&#39;</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;plotters&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Convert-mission-from-a-local-directory-of-basestation-files">
<h3>Convert mission from a local directory of basestation files<a class="headerlink" href="#Convert-mission-from-a-local-directory-of-basestation-files" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>For local data in the directory <code class="docutils literal notranslate"><span class="pre">input_dir</span></code></p></li>
<li><p>Creates a plot of ctd_depth against ctd_time.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify the input directory on your local machine</span>
<span class="n">input_dir</span> <span class="o">=</span> <span class="n">data_path</span> <span class="o">+</span> <span class="s1">&#39;/demo_sg005&#39;</span> <span class="c1">### chose the input directory with your data</span>

<span class="c1"># Load and concatenate all datasets in the input directory</span>
<span class="c1"># Optionally, specify the range of profiles to load (start_profile, end_profile)</span>
<span class="n">list_datasets</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">load_basestation_files</span><span class="p">(</span><span class="n">input_dir</span><span class="p">,</span> <span class="n">start_profile</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">end_profile</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># Convert the list of datasets to OG1</span>
<span class="n">ds_OG1</span><span class="p">,</span> <span class="n">var_list</span> <span class="o">=</span> <span class="n">convertOG1</span><span class="o">.</span><span class="n">convert_to_OG1</span><span class="p">(</span><span class="n">list_datasets</span><span class="p">)</span>

<span class="c1"># Generate a simple plot</span>
<span class="n">plotters</span><span class="o">.</span><span class="n">plot_profile_depth</span><span class="p">(</span><span class="n">ds_OG1</span><span class="p">)</span>
<span class="n">plotters</span><span class="o">.</span><span class="n">show_contents</span><span class="p">(</span><span class="n">ds_OG1</span><span class="p">,</span><span class="s1">&#39;attrs&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[11]</span><span class="ansi-green-fg">, line 6</span>
<span class="ansi-green-fg">      2</span> input_dir = data_path + <span class="ansi-yellow-fg">&#39;</span><span class="ansi-yellow-fg">/demo_sg005</span><span class="ansi-yellow-fg">&#39;</span> <span style="color: rgb(95,135,135)">### chose the input directory with your data</span>
<span class="ansi-green-fg">      4</span> <span style="color: rgb(95,135,135)"># Load and concatenate all datasets in the input directory</span>
<span class="ansi-green-fg">      5</span> <span style="color: rgb(95,135,135)"># Optionally, specify the range of profiles to load (start_profile, end_profile)</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">6</span> list_datasets = <span class="ansi-yellow-bg">readers</span>.load_basestation_files(input_dir, start_profile=<span class="ansi-green-fg">1</span>, end_profile=<span class="ansi-green-fg">5</span>)
<span class="ansi-green-fg">      8</span> <span style="color: rgb(95,135,135)"># Convert the list of datasets to OG1</span>
<span class="ansi-green-fg">      9</span> ds_OG1, var_list = convertOG1.convert_to_OG1(list_datasets)

<span class="ansi-red-fg">NameError</span>: name &#39;readers&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Convert-mission-from-the-NCEI-server-(with-p*nc-files)">
<h3>Convert mission from the NCEI server (with p*nc files)<a class="headerlink" href="#Convert-mission-from-the-NCEI-server-(with-p*nc-files)" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Data from the sg015 mission in the Labrador Sea (<a class="reference external" href="https://www.ncei.noaa.gov/access/metadata/landing-page/bin/iso?id=gov.noaa.nodc:0111844">https://www.ncei.noaa.gov/access/metadata/landing-page/bin/iso?id=gov.noaa.nodc:0111844</a>), dataset identifier gov.noaa.nodc:0111844.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify the server where data are located</span>
<span class="n">server</span> <span class="o">=</span> <span class="s2">&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/033/20100903/&quot;</span>

<span class="c1"># Load and concatenate all datasets from the server, optionally specifying the range of profiles to load</span>
<span class="n">list_datasets</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">load_basestation_files</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">start_profile</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">end_profile</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>

<span class="c1"># Convert the list of datasets to OG1</span>
<span class="n">ds_OG1</span><span class="p">,</span> <span class="n">var_list</span> <span class="o">=</span> <span class="n">convertOG1</span><span class="o">.</span><span class="n">convert_to_OG1</span><span class="p">(</span><span class="n">list_datasets</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[12]</span><span class="ansi-green-fg">, line 5</span>
<span class="ansi-green-fg">      2</span> server = <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/033/20100903/</span><span class="ansi-yellow-fg">&#34;</span>
<span class="ansi-green-fg">      4</span> <span style="color: rgb(95,135,135)"># Load and concatenate all datasets from the server, optionally specifying the range of profiles to load</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">5</span> list_datasets = <span class="ansi-yellow-bg">readers</span>.load_basestation_files(server, start_profile=<span class="ansi-green-fg">1</span>, end_profile=<span class="ansi-green-fg">19</span>)
<span class="ansi-green-fg">      7</span> <span style="color: rgb(95,135,135)"># Convert the list of datasets to OG1</span>
<span class="ansi-green-fg">      8</span> ds_OG1, var_list = convertOG1.convert_to_OG1(list_datasets)

<span class="ansi-red-fg">NameError</span>: name &#39;readers&#39; is not defined
</pre></div></div>
</div>
</section>
</section>
<section id="Saving-data">
<h2>Saving data<a class="headerlink" href="#Saving-data" title="Link to this heading"></a></h2>
<p>Due to problems with writing <code class="docutils literal notranslate"><span class="pre">xarray</span></code> datasets as netCDF when attributes are not of a specified type (<code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>, <code class="docutils literal notranslate"><span class="pre">np.number</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code>), a function was written <code class="docutils literal notranslate"><span class="pre">save_dataset</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write the file</span>
<span class="c1"># This writer catches errors in data types (DType errors) when using xr.to_netcdf()</span>
<span class="c1"># The solution is to convert them to strings, which may be undesired behaviour</span>
<span class="n">output_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="s1">&#39;demo_test.nc&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_file</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>

<span class="n">writers</span><span class="o">.</span><span class="n">save_dataset</span><span class="p">(</span><span class="n">ds_OG1</span><span class="p">,</span> <span class="n">output_file</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[13]</span><span class="ansi-green-fg">, line 8</span>
<span class="ansi-green-fg">      5</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> os.path.exists(output_file):
<span class="ansi-green-fg">      6</span>     os.remove(output_file)
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">8</span> <span class="ansi-yellow-bg">writers</span>.save_dataset(ds_OG1, output_file);

<span class="ansi-red-fg">NameError</span>: name &#39;writers&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the data saved</span>
<span class="n">ds1</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>

<span class="c1"># Generate a simple plot</span>
<span class="c1">#plotters.show_contents(ds_all,&#39;attrs&#39;)</span>
<span class="n">plotters</span><span class="o">.</span><span class="n">plot_depth_colored</span><span class="p">(</span><span class="n">ds1</span><span class="p">,</span> <span class="n">color_by</span><span class="o">=</span><span class="s1">&#39;PROFILE_NUMBER&#39;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyError</span>                                  Traceback (most recent call last)
<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/site-packages/xarray/backends/file_manager.py:211</span>, in <span class="ansi-cyan-fg">CachingFileManager._acquire_with_cache_info</span><span class="ansi-blue-fg">(self, needs_lock)</span>
<span class="ansi-green-fg">    210</span> <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">211</span>     file = <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_cache</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_key</span><span class="ansi-yellow-bg">]</span>
<span class="ansi-green-fg">    212</span> <span class="ansi-bold" style="color: rgb(0,135,0)">except</span> <span class="ansi-bold" style="color: rgb(215,95,95)">KeyError</span>:

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/site-packages/xarray/backends/lru_cache.py:56</span>, in <span class="ansi-cyan-fg">LRUCache.__getitem__</span><span class="ansi-blue-fg">(self, key)</span>
<span class="ansi-green-fg">     55</span> <span class="ansi-bold" style="color: rgb(0,135,0)">with</span> <span style="color: rgb(0,135,0)">self</span>._lock:
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">56</span>     value = <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_cache</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg">key</span><span class="ansi-yellow-bg">]</span>
<span class="ansi-green-fg">     57</span>     <span style="color: rgb(0,135,0)">self</span>._cache.move_to_end(key)

<span class="ansi-red-fg">KeyError</span>: [&lt;class &#39;netCDF4._netCDF4.Dataset&#39;&gt;, (&#39;/home/runner/work/seagliderOG1/seagliderOG1/data/demo_test.nc&#39;,), &#39;r&#39;, ((&#39;clobber&#39;, True), (&#39;diskless&#39;, False), (&#39;format&#39;, &#39;NETCDF4&#39;), (&#39;persist&#39;, False)), &#39;c3e9d6a1-efd5-4737-8e1e-4b128aa9fa64&#39;]

During handling of the above exception, another exception occurred:

<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[14]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> <span style="color: rgb(95,135,135)"># Load the data saved</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> ds1 = <span class="ansi-yellow-bg">xr</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">open_dataset</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">output_file</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">      4</span> <span style="color: rgb(95,135,135)"># Generate a simple plot</span>
<span class="ansi-green-fg">      5</span> <span style="color: rgb(95,135,135)">#plotters.show_contents(ds_all,&#39;attrs&#39;)</span>
<span class="ansi-green-fg">      6</span> plotters.plot_depth_colored(ds1, color_by=<span class="ansi-yellow-fg">&#39;</span><span class="ansi-yellow-fg">PROFILE_NUMBER</span><span class="ansi-yellow-fg">&#39;</span>)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/site-packages/xarray/backends/api.py:760</span>, in <span class="ansi-cyan-fg">open_dataset</span><span class="ansi-blue-fg">(filename_or_obj, engine, chunks, cache, decode_cf, mask_and_scale, decode_times, decode_timedelta, use_cftime, concat_characters, decode_coords, drop_variables, create_default_indexes, inline_array, chunked_array_type, from_array_kwargs, backend_kwargs, **kwargs)</span>
<span class="ansi-green-fg">    748</span> decoders = _resolve_decoders_kwargs(
<span class="ansi-green-fg">    749</span>     decode_cf,
<span class="ansi-green-fg">    750</span>     open_backend_dataset_parameters=backend.open_dataset_parameters,
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">    756</span>     decode_coords=decode_coords,
<span class="ansi-green-fg">    757</span> )
<span class="ansi-green-fg">    759</span> overwrite_encoded_chunks = kwargs.pop(<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">overwrite_encoded_chunks</span><span class="ansi-yellow-fg">&#34;</span>, <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>)
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">760</span> backend_ds = <span class="ansi-yellow-bg">backend</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">open_dataset</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">    761</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">filename_or_obj</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    762</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">drop_variables</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">drop_variables</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    763</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">decoders</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    764</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    765</span> <span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    766</span> ds = _dataset_from_backend_dataset(
<span class="ansi-green-fg">    767</span>     backend_ds,
<span class="ansi-green-fg">    768</span>     filename_or_obj,
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">    779</span>     **kwargs,
<span class="ansi-green-fg">    780</span> )
<span class="ansi-green-fg">    781</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> ds

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/site-packages/xarray/backends/netCDF4_.py:682</span>, in <span class="ansi-cyan-fg">NetCDF4BackendEntrypoint.open_dataset</span><span class="ansi-blue-fg">(self, filename_or_obj, mask_and_scale, decode_times, concat_characters, decode_coords, drop_variables, use_cftime, decode_timedelta, group, mode, format, clobber, diskless, persist, auto_complex, lock, autoclose)</span>
<span class="ansi-green-fg">    660</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-fg">open_dataset</span>(
<span class="ansi-green-fg">    661</span>     <span style="color: rgb(0,135,0)">self</span>,
<span class="ansi-green-fg">    662</span>     filename_or_obj: T_PathFileOrDataStore,
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">    679</span>     autoclose=<span class="ansi-bold" style="color: rgb(0,135,0)">False</span>,
<span class="ansi-green-fg">    680</span> ) -&gt; Dataset:
<span class="ansi-green-fg">    681</span>     filename_or_obj = _normalize_path(filename_or_obj)
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">682</span>     store = <span class="ansi-yellow-bg">NetCDF4DataStore</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">open</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">    683</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">filename_or_obj</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    684</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">mode</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">mode</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    685</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">format</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">format</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    686</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">group</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">group</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    687</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">clobber</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">clobber</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    688</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">diskless</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">diskless</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    689</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">persist</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">persist</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    690</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">auto_complex</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">auto_complex</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    691</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">lock</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">lock</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    692</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">autoclose</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">autoclose</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">    693</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    695</span>     store_entrypoint = StoreBackendEntrypoint()
<span class="ansi-green-fg">    696</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">with</span> close_on_error(store):

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/site-packages/xarray/backends/netCDF4_.py:468</span>, in <span class="ansi-cyan-fg">NetCDF4DataStore.open</span><span class="ansi-blue-fg">(cls, filename, mode, format, group, clobber, diskless, persist, auto_complex, lock, lock_maker, autoclose)</span>
<span class="ansi-green-fg">    464</span>     kwargs[<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">auto_complex</span><span class="ansi-yellow-fg">&#34;</span>] = auto_complex
<span class="ansi-green-fg">    465</span> manager = CachingFileManager(
<span class="ansi-green-fg">    466</span>     netCDF4.Dataset, filename, mode=mode, kwargs=kwargs
<span class="ansi-green-fg">    467</span> )
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">468</span> <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">cls</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">manager</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">group</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">group</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">mode</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">mode</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">lock</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">lock</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">autoclose</span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg">autoclose</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/site-packages/xarray/backends/netCDF4_.py:398</span>, in <span class="ansi-cyan-fg">NetCDF4DataStore.__init__</span><span class="ansi-blue-fg">(self, manager, group, mode, lock, autoclose)</span>
<span class="ansi-green-fg">    396</span> <span style="color: rgb(0,135,0)">self</span>._group = group
<span class="ansi-green-fg">    397</span> <span style="color: rgb(0,135,0)">self</span>._mode = mode
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">398</span> <span style="color: rgb(0,135,0)">self</span>.format = <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">ds</span>.data_model
<span class="ansi-green-fg">    399</span> <span style="color: rgb(0,135,0)">self</span>._filename = <span style="color: rgb(0,135,0)">self</span>.ds.filepath()
<span class="ansi-green-fg">    400</span> <span style="color: rgb(0,135,0)">self</span>.is_remote = is_remote_uri(<span style="color: rgb(0,135,0)">self</span>._filename)

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/site-packages/xarray/backends/netCDF4_.py:477</span>, in <span class="ansi-cyan-fg">NetCDF4DataStore.ds</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-fg">    475</span> <span style="color: rgb(175,0,255)">@property</span>
<span class="ansi-green-fg">    476</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-fg">ds</span>(<span style="color: rgb(0,135,0)">self</span>):
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">477</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_acquire</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/site-packages/xarray/backends/netCDF4_.py:471</span>, in <span class="ansi-cyan-fg">NetCDF4DataStore._acquire</span><span class="ansi-blue-fg">(self, needs_lock)</span>
<span class="ansi-green-fg">    470</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-fg">_acquire</span>(<span style="color: rgb(0,135,0)">self</span>, needs_lock=<span class="ansi-bold" style="color: rgb(0,135,0)">True</span>):
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">471</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg ansi-bold" style="color: rgb(0,135,0)">with</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_manager</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">acquire_context</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">needs_lock</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg ansi-bold" style="color: rgb(0,135,0)">as</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">root</span><span class="ansi-yellow-bg">:</span>
<span class="ansi-green-fg">    472</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">ds</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">=</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">_nc4_require_group</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">root</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_group</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_mode</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    473</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> ds

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/contextlib.py:141</span>, in <span class="ansi-cyan-fg">_GeneratorContextManager.__enter__</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-fg">    139</span> <span class="ansi-bold" style="color: rgb(0,135,0)">del</span> <span style="color: rgb(0,135,0)">self</span>.args, <span style="color: rgb(0,135,0)">self</span>.kwds, <span style="color: rgb(0,135,0)">self</span>.func
<span class="ansi-green-fg">    140</span> <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">141</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">next</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">gen</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    142</span> <span class="ansi-bold" style="color: rgb(0,135,0)">except</span> <span class="ansi-bold" style="color: rgb(215,95,95)">StopIteration</span>:
<span class="ansi-green-fg">    143</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span> <span class="ansi-bold" style="color: rgb(215,95,95)">RuntimeError</span>(<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">generator didn</span><span class="ansi-yellow-fg">&#39;</span><span class="ansi-yellow-fg">t yield</span><span class="ansi-yellow-fg">&#34;</span>) <span class="ansi-bold" style="color: rgb(0,135,0)">from</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-bold" style="color: rgb(0,135,0)">None</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/site-packages/xarray/backends/file_manager.py:199</span>, in <span class="ansi-cyan-fg">CachingFileManager.acquire_context</span><span class="ansi-blue-fg">(self, needs_lock)</span>
<span class="ansi-green-fg">    196</span> <span style="color: rgb(175,0,255)">@contextlib</span>.contextmanager
<span class="ansi-green-fg">    197</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-blue-fg">acquire_context</span>(<span style="color: rgb(0,135,0)">self</span>, needs_lock=<span class="ansi-bold" style="color: rgb(0,135,0)">True</span>):
<span class="ansi-green-fg">    198</span> <span style="color: rgb(188,188,188)">    </span><span class="ansi-yellow-fg">&#34;&#34;&#34;Context manager for acquiring a file.&#34;&#34;&#34;</span>
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">199</span>     file, cached = <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_acquire_with_cache_info</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">needs_lock</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    200</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">    201</span>         <span class="ansi-bold" style="color: rgb(0,135,0)">yield</span> file

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">~/micromamba/envs/TEST/lib/python3.13/site-packages/xarray/backends/file_manager.py:217</span>, in <span class="ansi-cyan-fg">CachingFileManager._acquire_with_cache_info</span><span class="ansi-blue-fg">(self, needs_lock)</span>
<span class="ansi-green-fg">    215</span>     kwargs = kwargs.copy()
<span class="ansi-green-fg">    216</span>     kwargs[<span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">mode</span><span class="ansi-yellow-fg">&#34;</span>] = <span style="color: rgb(0,135,0)">self</span>._mode
<span class="ansi-green-fg">--&gt; </span><span class="ansi-green-fg">217</span> file = <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_opener</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">_args</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">kwargs</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    218</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> <span style="color: rgb(0,135,0)">self</span>._mode == <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">w</span><span class="ansi-yellow-fg">&#34;</span>:
<span class="ansi-green-fg">    219</span>     <span style="color: rgb(95,135,135)"># ensure file doesn&#39;t get overridden when opened again</span>
<span class="ansi-green-fg">    220</span>     <span style="color: rgb(0,135,0)">self</span>._mode = <span class="ansi-yellow-fg">&#34;</span><span class="ansi-yellow-fg">a</span><span class="ansi-yellow-fg">&#34;</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">src/netCDF4/_netCDF4.pyx:2521</span>, in <span class="ansi-cyan-fg">netCDF4._netCDF4.Dataset.__init__</span><span class="ansi-blue-fg">()</span>

<span class="ansi-cyan-fg">File </span><span class="ansi-green-fg">src/netCDF4/_netCDF4.pyx:2158</span>, in <span class="ansi-cyan-fg">netCDF4._netCDF4._ensure_nc_success</span><span class="ansi-blue-fg">()</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;/home/runner/work/seagliderOG1/seagliderOG1/data/demo_test.nc&#39;
</pre></div></div>
</div>
</section>
<section id="Run-multiple-missions">
<h2>Run multiple missions<a class="headerlink" href="#Run-multiple-missions" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add these to existing attributes - update to your details</span>
<span class="n">contrib_to_append</span> <span class="o">=</span> <span class="n">vocabularies</span><span class="o">.</span><span class="n">contrib_to_append</span>
<span class="nb">print</span><span class="p">(</span><span class="n">contrib_to_append</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[15]</span><span class="ansi-green-fg">, line 2</span>
<span class="ansi-green-fg">      1</span> <span style="color: rgb(95,135,135)"># Add these to existing attributes - update to your details</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">2</span> contrib_to_append = <span class="ansi-yellow-bg">vocabularies</span>.contrib_to_append
<span class="ansi-green-fg">      3</span> <span style="color: rgb(0,135,0)">print</span>(contrib_to_append)

<span class="ansi-red-fg">NameError</span>: name &#39;vocabularies&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify a list of servers or local directories</span>
<span class="n">input_locations</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># Either Iceland, Faroes or RAPID/MOCHA</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/005/20090829/&quot;, # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/005/20080606/&quot;, # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/005/20081106/&quot;, # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/012/20070831/&quot;, # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/014/20080214/&quot;,  # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/014/20080222/&quot;, # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/016/20061112/&quot;,  # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/016/20090605/&quot;, # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/016/20071113/&quot;, # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/016/20080607/&quot;,  # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/033/20100518/&quot;, # done</span>
    <span class="s2">&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/033/20100903/&quot;</span><span class="p">,</span> <span class="c1"># done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/101/20081108/&quot;,     # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/101/20061112/&quot;,    # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/101/20070609/&quot;,   # done</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/102/20061112/&quot;,  # done</span>
    <span class="c1"># Labrador Sea</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/015/20040924/&quot;,</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/014/20040924/&quot;,</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/008/20031002/&quot;,</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/004/20031002/&quot;,</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/016/20050406/&quot;,</span>
    <span class="c1"># RAPID/MOCHA</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/033/20100729/&quot;,</span>
    <span class="c1">#&quot;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/034/20110128/&quot;,</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">input_loc</span> <span class="ow">in</span> <span class="n">input_locations</span><span class="p">:</span>
    <span class="c1"># Example usage</span>
    <span class="n">ds_all</span> <span class="o">=</span> <span class="n">convertOG1</span><span class="o">.</span><span class="n">process_and_save_data</span><span class="p">(</span><span class="n">input_loc</span><span class="p">,</span> <span class="n">output_dir</span><span class="o">=</span><span class="n">data_path</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">run_quietly</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[16]</span><span class="ansi-green-fg">, line 33</span>
<span class="ansi-green-fg">      2</span> input_locations = [
<span class="ansi-green-fg">      3</span>     <span style="color: rgb(95,135,135)"># Either Iceland, Faroes or RAPID/MOCHA</span>
<span class="ansi-green-fg">      4</span>     <span style="color: rgb(95,135,135)">#&#34;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/005/20090829/&#34;, # done</span>
<span class="ansi-green-fg">   (...)</span><span class="ansi-green-fg">     28</span>     <span style="color: rgb(95,135,135)">#&#34;https://www.ncei.noaa.gov/data/oceans/glider/seaglider/uw/034/20110128/&#34;,</span>
<span class="ansi-green-fg">     29</span> ]
<span class="ansi-green-fg">     31</span> <span class="ansi-bold" style="color: rgb(0,135,0)">for</span> input_loc <span class="ansi-bold" style="color: rgb(175,0,255)">in</span> input_locations:
<span class="ansi-green-fg">     32</span>     <span style="color: rgb(95,135,135)"># Example usage</span>
<span class="ansi-green-fg">---&gt; </span><span class="ansi-green-fg">33</span>     ds_all = <span class="ansi-yellow-bg">convertOG1</span>.process_and_save_data(input_loc, output_dir=data_path, save=<span class="ansi-bold" style="color: rgb(0,135,0)">True</span>,  run_quietly=<span class="ansi-bold" style="color: rgb(0,135,0)">True</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;convertOG1&#39; is not defined
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="project_structure.html" class="btn btn-neutral float-left" title="What’s in seagliderOG1 project?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="seagliderOG1.html" class="btn btn-neutral float-right" title="seagliderOG1 API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Eleanor Frajka-Williams, Till Moritz.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>